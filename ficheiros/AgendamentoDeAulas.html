<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Horário ISCTE</title>
    <script src="luxon.js"></script>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>
</head>

<body>
    <h1>Agendamento de Aulas:</h1>

    <!-- Formulário para solicitar 3 inputs -->
    <form id="userInputForm">
        <label for="input1">Nome da UC:</label>
        <input type="text" id="input1" name="input1" required><br><br>

        <label for="input2">Número de aulas da UC a serem marcadas no horário:</label>
        <input type="text" id="input2" name="input2" max="40" required><br><br>


        <label>Períodos que devem ser excluídos para alocação das aulas:</label><br>
        <input type="checkbox" id="manha" name="periodoAExcluir" value="Manhã">
        <label for="manha">Manhã (8:00 - 12:30) </label><br>
        <input type="checkbox" id="tarde" name="periodoAExcluir" value="Tarde">
        <label for="tarde">Tarde (12:30 - 18:30) </label><br>
        <input type="checkbox" id="noite" name="periodoAExcluir" value="Noite">
        <label for="noite">Noite (18:30 - 23:00) </label><br><br>

        <label for="input4">Períodos em que é <strong>possível</strong> alocar as aulas:</label><br>
        <input type="checkbox" id="manha" name="periodoPossivel" value="Manhã">
        <label for="manha">Manhã (8:00 - 12:30)</label><br>
        <input type="checkbox" id="tarde" name="periodoPossivel" value="Tarde">
        <label for="tarde">Tarde (12:30 - 18:30)</label><br>
        <input type="checkbox" id="noite" name="periodoPossivel" value="Noite">
        <label for="noite">Noite (18:30 - 23:00)</label><br><br>

        <p class="label_input">Preferência de sala:</p>
        <p>Preferência nº1:</p>
        <select class="form-select" id="preferenciaSala1" aria-label="Default select example">
            <option selected>Escolha uma Preferência</option>
        </select>
        <p>Preferência nº2:</p>
        <select class="form-select" id="preferenciaSala2" aria-label="Default select example">
            <option selected>Escolha uma Preferência</option>
        </select>
        <p>Preferência nº3:</p>
        <select class="form-select" id="preferenciaSala3" aria-label="Default select example">
            <option selected>Escolha uma Preferência</option>
        </select><br>

        <label for="input6">Tipos de salas que não são aceitáveis:</label>
        <input type="text" id="input6" name="input6"><br><br>

        <label for="input7">Duração das aulas:</label>
        <input type="text" id="input7" name="input7"><br><br>

        <label for="input9">Necessidade especiais das aulas:</label>
        <input type="text" id="input9" name="input9"><br><br>

        <input type="submit" value="Submit">
    </form>

  

    <script src="form.js">
        const pathJsonSalas = 'CaracterizacaoDasSalas.json';
        fetch(pathJsonSalas)
            .then(response => {
                // Verificar se o request foi bem sucedido
                if (!response.ok) {
                    throw new Error(`Failed to fetch ${pathJsonSalas}: ${response.statusText}`);
                }

                // Parse the JSON data
                return response.json();
            })

            .then(data => {

                const salas = data;

                // Obter todas as salas
                const nomesSalas = salas.map(room => room['Nome sala']);

                const preferenciaSala1 = document.getElementById('preferenciaSala1');
                const preferenciaSala2 = document.getElementById('preferenciaSala2');
                const preferenciaSala3 = document.getElementById('preferenciaSala3');

                const salasInaceitaveis = document.getElementById('salasInaceitaveis');

                nomesSalas.forEach(nomeSala => {
                    const optionPreferencia1 = document.createElement('option');
                    optionPreferencia1.textContent = nomeSala;
                    preferenciaSala1.appendChild(optionPreferencia1);

                    const optionPreferencia2 = document.createElement('option');
                    optionPreferencia2.textContent = nomeSala;
                    preferenciaSala2.appendChild(optionPreferencia2);

                    const optionPreferencia3 = document.createElement('option');
                    optionPreferencia3.textContent = nomeSala;
                    preferenciaSala3.appendChild(optionPreferencia3);

                    const optionSalasInaceitaveis = document.createElement('option');
                    optionSalasInaceitaveis.textContent = nomeSala;
                    salasInaceitaveis.appendChild(optionSalasInaceitaveis);
                });


            })
            .catch(error => {
                console.error(`Error loading ${pathJsonSalas}:`, error);
            });
    </script>

</body>

</html>