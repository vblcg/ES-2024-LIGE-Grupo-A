<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Horário ISCTE</title>
    <link rel="stylesheet" type="text/css" href="estilos.css">
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>
</head>

<body>
    <h1>Agendamento de Aulas:</h1>

    <!-- Formulário para solicitar 3 inputs -->
    <form id="userInputForm">
        <label for="input1">Nome da UC:</label>
        <input type="text" id="input1" name="input1" required><br><br>

        <label for="input2">Número de aulas da UC a serem marcadas no horário:</label>
        <input type="number" id="input2" name="input2" max="40" required><br><br>

        <label for="input4">Períodos em que é <strong>possível</strong> alocar as aulas:</label><br>
        <input type="checkbox" id="manha" name="periodoPossivel" value="Manhã">
        <label for="manha">Manhã (8:00 - 12:30)</label><br>
        <input type="checkbox" id="tarde" name="periodoPossivel" value="Tarde">
        <label for="tarde">Tarde (12:30 - 18:30)</label><br>
        <input type="checkbox" id="noite" name="periodoPossivel" value="Noite">
        <label for="noite">Noite (18:30 - 23:00)</label><br><br>


        <label for="input5">Preferência de dias da semana:</label><br>
        <input type="checkbox" value="Seg" name="diaDaSemanaPref" id="Segunda-feira">
        <label for="segunda">Segunda-feira</label><br>
        <input type="checkbox" value="Ter" name="diaDaSemanaPref" id="Terça-feira">
        <label for="terca">Terça-feira</label><br>
        <input type="checkbox" value="Qua" name="diaDaSemanaPref" id="Quarta-feira">
        <label for="quarta">Quarta-feira</label><br>
        <input type="checkbox" value="Qui" name="diaDaSemanaPref" id="Quinta-feira">
        <label for="quinta">Quinta-feira</label><br>
        <input type="checkbox" value="Sex" name="diaDaSemanaPref" id="Sexta-feira">
        <label for="sexta">Sexta-feira</label><br>
        <input type="checkbox" value="Sab" name="diaDaSemanaPref" id="Sábado">
        <label for="sabado">Sábado</label><br>


        <div class="form-group">
            <p>Preferência de Salas:</p>
            <select class="form-select" id="preferenciaSala" name="preferenciaSala" aria-label="Default select example"
                multiple>
            </select>

        </div><br>

        <div class="form-group">
            <p>Salas Inaceitáveis:</p>
            <select class="form-select" id='salasInaceitaveis' name="salasInaceitaveis[]"
                aria-label="Default select example" multiple>
            </select>
        </div><br>

        <label for="input8">Número de Alunos:</label>
        <input type="number" id="input8" name="input7"><br><br>

        <input type="submit" value="Submit">
    </form>

    <script type="text/javascript">
        const pathJsonSalas = 'CaracterizacaoDasSalas.json';
        fetch(pathJsonSalas)
            .then(response => {
                // Verificar se o request foi bem sucedido
                if (!response.ok) {
                    throw new Error(`Failed to fetch ${pathJsonSalas}: ${response.statusText}`);
                }

                // Parse the JSON data
                return response.json();
            })

            .then(data => {

                const salas = data;

                // Obter todas as salas
                const nomesSalas = salas.map(room => room['Nome sala']);

                const preferenciaSala = document.getElementById('preferenciaSala');


                const salasInaceitaveis = document.getElementById('salasInaceitaveis');

                nomesSalas.forEach(nomeSala => {
                    const optionPreferencia1 = document.createElement('option');
                    optionPreferencia1.textContent = nomeSala;
                    preferenciaSala.appendChild(optionPreferencia1);

                    const optionSalasInaceitaveis = document.createElement('option');
                    optionSalasInaceitaveis.textContent = nomeSala;
                    salasInaceitaveis.appendChild(optionSalasInaceitaveis);
                });


            })
            .catch(error => {
                console.error(`Error loading ${pathJsonSalas}:`, error);
            });
    </script>

    <script src="form.js"></script>

</body>

</html>